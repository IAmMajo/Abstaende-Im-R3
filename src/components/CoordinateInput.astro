---
import { MdFilledTextField } from "@material/web/textfield/filled-text-field";

export interface Props {
  id: string;
  label: string;
}

const { id, label } = Astro.props;
---

{
  (
    // @ts-expect-error
    <MdFilledTextField id={id} label={label} type="number" client:only="lit" />
  )
}
<script>
  addEventListener("focusin", generatePlaceholder);
  addEventListener("input", generatePlaceholder);

  function generatePlaceholder(event: Event) {
    const target = event.target as HTMLElement;
    if (target.tagName !== "MD-FILLED-TEXT-FIELD") {
      return;
    }
    let placeholder = (Math.random() * 10000).toLocaleString("de", {
      useGrouping: false,
      maximumFractionDigits: 2,
    });
    if (Math.random() < 0.5 && placeholder !== "0") {
      placeholder = `-${placeholder}`;
    }
    (target as HTMLInputElement).placeholder = placeholder;
  }
</script>
